#include"APP.h"


int main (void)
{

	UART_ConfigType UART_Configuration={_8_bit,no_parity,_1_bit,9600};
	Timer1_ConfigType Timer1_Configuration={0,15625,F_CPU_1024,CTC_MODE}; //15625 for making an interrupt each second

	UART_init(&UART_Configuration);
	Timer1_init(&Timer1_Configuration);
	DcMotor_Init();
	LCD_init();
	stepper_init();

	uint8 DataFlag=0;
	uint8 UART_Data[9];



while(1){

	rotate_motor(S_CW,20);

	do{

		UART_sendString("Welcom... please put the data ");
		UART_sendString("\r\n");
		UART_receiveString(UART_Data);
		LCD_displayString(UART_Data);


//
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[0]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[1]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[2]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[3]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[4]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[5]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[6]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[7]);
//		UART_sendString("\r\n");
//		UART_sendByte(UART_Data[8]);
//		UART_sendString("\r\n");
		if(UART_Data[7]=='E')
		{
			DataFlag=1;

		}


	}while(DataFlag!=1);


	int Velocity=0;
	int Angle=0;

	Velocity	= stringSubstringToInteger(UART_Data,0,2);
	Angle		= stringSubstringToInteger(UART_Data,4,5);

	LCD_moveCursor(1, 1);
	LCD_displayCharacter(Velocity);
	LCD_moveCursor(2, 1);
	LCD_displayCharacter(Angle);





}











}
